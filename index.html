<!DOCTYPE html>
<html lang="en">
  <head>
    <title>jinher.app.IntelDecision  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="jinher.app.IntelDecision  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">jinher.app.IntelDecision Docs</a> (16% documented)</p>
        <p class="header-right"><a href="https://github.com/huos3203"><img src="img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">jinher.app.IntelDecision Reference</a>
        <img id="carat" src="img/carat.png" />
        jinher.app.IntelDecision  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/AddIntelDesViewController.html">AddIntelDesViewController</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/AlertListFullView.html">AlertListFullView</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/AlertlistModel.html">AlertlistModel</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DecisionCellView.html">DecisionCellView</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/DecisionModel.html">DecisionModel</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/FilterModel.html">FilterModel</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/IntelDesListViewCell.html">IntelDesListViewCell</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/IntelDesModel.html">IntelDesModel</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/IntelDescisionView.html">IntelDescisionView</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/IntelDescisionViewController.html">IntelDescisionViewController</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/RoomListCellView.html">RoomListCellView</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/RoomListViewController.html">RoomListViewController</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/RoomStatusModel.html">RoomStatusModel</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SetCordonValueView.html">SetCordonValueView</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/StatusLabel.html">StatusLabel</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TestViewController.html">TestViewController</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TuliCell.html">TuliCell</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/NibLoadable.html">NibLoadable</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='' class='heading'>遇到的坑</h1>
<h2 id='' class='heading'>加载字体</h2>
<h3 id='plist' class='heading'>通过配置plist内置加载</h3>

<p>1.首先是最简单也普遍的做法，打包内置字符库文件：</p>

<p>把字体库文件添加到工程，如font1.ttf添加到工程，然后在工程plist添加一项Fonts provided by application，这是个数组，然后添加key item1，value就是刚才说的font1.ttf
那么在工程里就可以直接使用这个字体，直接用</p>

<ul>
<li>(UIFont *)fontWithName:(NSString *)fontName size:(CGFloat)fontSize; 即可。</li>
</ul>

<p>不过需要注意的是，这个fontName不是文件名，而是里面真正的字体名。如上面的font1.ttf里面的字体是MFQingShu_Noncommercial-Regular，那就直接用</p>

<p>UIFont *font = [UIFont fontWithName:@<q>MFQingShu_Noncommercial-Regular</q> size:12];就能去到正确的字体。</p>
<h3 id='' class='heading'>通过代码直接加载</h3>

<p><a href="http://www.cnblogs.com/vicstudio/p/3961195.html">iOS使用自定义字体的方法:内置和任意下载ttf\otf\ttc字体文件</a></p>

<ol>
<li>swift代码
<code>swift
//MARK: 加载字体
func customFont(_ path:String, size:CGFloat) -&gt; UIFont {
let fontUrl = URL.init(fileURLWithPath: path)
let fontDataProvider = CGDataProvider.init(url: fontUrl as CFURL)
let fontRef = CGFont.init(fontDataProvider!)
CTFontManagerRegisterGraphicsFont(fontRef!, nil)
let fontName = fontRef?.postScriptName
let font = UIFont.init(name: fontName! as String, size: size)
return font!
}
</code></li>
<li>objc代码
<code>objc
-(UIFont*)customFontWithPath:(NSString*)path size:(CGFloat)size
{
NSURL *fontUrl = [NSURL fileURLWithPath:path];
CGDataProviderRef fontDataProvider = CGDataProviderCreateWithURL((__bridge CFURLRef)fontUrl);
CGFontRef fontRef = CGFontCreateWithDataProvider(fontDataProvider);
CGDataProviderRelease(fontDataProvider);
CTFontManagerRegisterGraphicsFont(fontRef, NULL);
NSString *fontName = CFBridgingRelease(CGFontCopyPostScriptName(fontRef));
UIFont *font = [UIFont fontWithName:fontName size:size];
CGFontRelease(fontRef);
return font;
}
</code>
### 开发局部视图插件
获取某控件相对于屏幕的坐标位置
<code>
let rect = ibExampleButton.convert(ibExampleButton.center, to: zhezView)
let x = tableView.frame.size.width/2 - 10
let y = rect.y
let tabrect = CGRect.init(origin: CGPoint.init(x: x, y: y), size: tableView.frame.size)
tableView.frame = tabrect
</code>
添加遮罩层屏蔽点击事件
<code>
let window = (UIApplication.shared.delegate?.window)!
zhezView = UIView.init(frame: (window?.bounds)!)
zhezView.isUserInteractionEnabled = true
let tap = UITapGestureRecognizer.init(target: self, action: #selector(IntelDescisionView.tapGestureAction(_:)))
tap.numberOfTapsRequired = 1
zhezView.addGestureRecognizer(tap)
</code>
### <a href="https://www.jianshu.com/p/8cbe0d767ba4">swift中UIView从XIB加载(POP思想)</a></li>
<li><p>新建一个NibLoadable的swift文件.</p>
<pre class="highlight plaintext"><code>protocol NibLoadable {
}
extension NibLoadable where Self : UIView {
//在协议里面不允许定义class 只能定义static
static func loadFromNib(_ nibname: String? = nil) -&gt; Self {//Self (大写) 当前类对象
    //self(小写) 当前对象
    let loadName = nibname == nil ? "\(self)" : nibname!

    return Bundle.main.loadNibNamed(loadName, owner: nil, options: nil)?.first as! Self
}
}
</code></pre></li>
<li><p>在需要使用XIB加载的页面实现该协议方法</p>
<pre class="highlight plaintext"><code>class DemoView: UIView ,NibLoadable{
}
</code></pre></li>
<li><p>使用方法</p>
<pre class="highlight plaintext"><code>//3.1 xib文件与类名同名的情况
let demoView = DemoView.loadFromNib()
demoView.backgroundColor = UIColor.red
view.addSubview(demoView)
</code></pre></li>
</ol>

<p>//3.2 xib文件与类名不相同的情况
let testV = TestView.loadFromNib(<q>TestView0</q>)
testV.backgroundColor = UIColor.green
view.addSubview(testV)</p>
<pre class="highlight plaintext"><code>
## 问题
基于Framework 无法获取Asset.cer图片资源
[让你的iOS库支持pod和carthage](https://www.jianshu.com/p/30246a000bc6)

解决：
新建bundle资源包，copy resource到framework目录下
Xcode创建bundle 在macOS项目分类中，创建之后需要把osx相关配置更改为iOS的，比较繁琐，图片为@2@3图片会合并为tiff格式。
建议手动创建一个目录，重命名成后缀为`.bundle`即可。这样png文件不会被转为tiff格式。
</code></pre>

<p>///借用了OHHTTPStubs方法，获取framework内部的bundle资源包
let bundles = OHResourceBundle(<q>source</q>, type(of: self))
iconImageView.image = UIImage.init(named: newValue.icon, in: bundles, compatibleWith: nil)</p>
<pre class="highlight plaintext"><code></code></pre>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2018 <a class="link" href="http://huos3203.github.io" target="_blank" rel="external">iTBoyer</a>. All rights reserved. (Last updated: 2018-11-28)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.9.3</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
